{"ast":null,"code":"import _slicedToArray from\"E:/College Projects/ecommerce/ecommerce/store/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import Form from\"react-bootstrap/Form\";import Button from\"react-bootstrap/Button\";import{Link,useNavigate}from\"react-router-dom\";import\"./OPTVerification.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var LOCKOUT_DURATION=30000;// Lockout duration in milliseconds (30 seconds)\nexport default function OTPVerification(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),otp=_useState2[0],setOtp=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),locked=_useState6[0],setLocked=_useState6[1];// Add a locked state\nvar navigate=useNavigate();useEffect(function(){var unlockTimeout;// Check if the user is locked\nif(locked){// Set a timeout to unlock the user after the specified duration\nunlockTimeout=setTimeout(function(){setLocked(false);setError(null);// Clear any previous errors\n},LOCKOUT_DURATION);}return function(){// Clear the unlock timeout when the component unmounts\nclearTimeout(unlockTimeout);};},[locked]);function validateForm(){return otp.length===4;}function handleSubmit(event){event.preventDefault();if(locked){setError(\"You are locked out. Try again in \".concat(LOCKOUT_DURATION/1000,\" seconds.\"));return;}if(otp===\"0000\"){// Successful OTP verification, navigate to the store\nnavigate(\"/store\");}else{setError(\"Incorrect OTP. Please try again.\");setLocked(true);// Lock the user after a failed attempt\n}}return/*#__PURE__*/_jsx(\"div\",{className:\"OTPVerification\",children:/*#__PURE__*/_jsxs(Form,{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"OTP Verification\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Please check your email for the OTP.\"}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"otp\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"Enter OTP\"}),/*#__PURE__*/_jsx(Form.Control,{autoFocus:true,type:\"password\",value:otp,onChange:function onChange(e){return setOtp(e.target.value);}})]}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:error}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",block:true,size:\"lg\",type:\"submit\",disabled:!validateForm(),children:\"Verify OTP\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"login-link\",children:[\"Already registered? \",/*#__PURE__*/_jsx(Link,{to:\"/login\",children:\"Login\"})]})]})});}","map":{"version":3,"names":["React","useState","useEffect","Form","Button","Link","useNavigate","jsx","_jsx","jsxs","_jsxs","LOCKOUT_DURATION","OTPVerification","_useState","_useState2","_slicedToArray","otp","setOtp","_useState3","_useState4","error","setError","_useState5","_useState6","locked","setLocked","navigate","unlockTimeout","setTimeout","clearTimeout","validateForm","length","handleSubmit","event","preventDefault","concat","className","children","onSubmit","Group","controlId","Label","Control","autoFocus","type","value","onChange","e","target","variant","block","size","disabled","to"],"sources":["E:/College Projects/ecommerce/ecommerce/store/src/pages/OTPVerification.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport Form from \"react-bootstrap/Form\";\nimport Button from \"react-bootstrap/Button\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport \"./OPTVerification.css\";\n\nconst LOCKOUT_DURATION = 30000; // Lockout duration in milliseconds (30 seconds)\n\nexport default function OTPVerification() {\n  const [otp, setOtp] = useState(\"\");\n  const [error, setError] = useState(null);\n  const [locked, setLocked] = useState(false); // Add a locked state\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    let unlockTimeout;\n\n    // Check if the user is locked\n    if (locked) {\n      // Set a timeout to unlock the user after the specified duration\n      unlockTimeout = setTimeout(() => {\n        setLocked(false);\n        setError(null); // Clear any previous errors\n      }, LOCKOUT_DURATION);\n    }\n\n    return () => {\n      // Clear the unlock timeout when the component unmounts\n      clearTimeout(unlockTimeout);\n    };\n  }, [locked]);\n\n  function validateForm() {\n    return otp.length === 4;\n  }\n\n  function handleSubmit(event) {\n    event.preventDefault();\n\n    if (locked) {\n      setError(`You are locked out. Try again in ${LOCKOUT_DURATION / 1000} seconds.`);\n      return;\n    }\n\n    if (otp === \"0000\") {\n      // Successful OTP verification, navigate to the store\n      navigate(\"/store\");\n    } else {\n      setError(\"Incorrect OTP. Please try again.\");\n      setLocked(true); // Lock the user after a failed attempt\n    }\n  }\n\n  return (\n    <div className=\"OTPVerification\">\n      <Form onSubmit={handleSubmit}>\n        <h2>OTP Verification</h2>\n        <p>Please check your email for the OTP.</p>\n        <Form.Group controlId=\"otp\">\n          <Form.Label>Enter OTP</Form.Label>\n          <Form.Control\n            autoFocus\n            type=\"password\"\n            value={otp}\n            onChange={(e) => setOtp(e.target.value)}\n          />\n        </Form.Group>\n        {error && <div className=\"error-message\">{error}</div>}\n        <Button\n          variant=\"primary\"\n          block\n          size=\"lg\"\n          type=\"submit\"\n          disabled={!validateForm()}\n        >\n          Verify OTP\n        </Button>\n        <div className=\"login-link\">\n          Already registered? <Link to=\"/login\">Login</Link>\n        </div>\n      </Form>\n    </div>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}